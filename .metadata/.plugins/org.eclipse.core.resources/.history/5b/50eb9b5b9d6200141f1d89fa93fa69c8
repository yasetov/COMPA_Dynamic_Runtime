#include "xil_cache.h"
#include "fifoAllocations.h"

/////////////////////////////////////////////////
// Action initializes
extern int decoder_parser_parseheaders_initialize();
extern int decoder_texture_idct2d_initialize();
extern int decoder_motion_add_initialize();
extern int decoder_motion_framebuf_initialize();

/////////////////////////////////////////////////
// Action schedulers
extern int decoder_parser_parseheaders_scheduler();
extern int decoder_texture_idct2d_scheduler();
extern int decoder_motion_add_scheduler();
extern int decoder_motion_framebuf_scheduler();

/////////////////////////////////////////////////
// Actor scheduler
void main() {
	
	microblaze_disable_dcache();
	
	decoder_parser_parseheaders_initialize();
	decoder_texture_idct2d_initialize();
	decoder_motion_add_initialize();
	decoder_motion_framebuf_initialize();
	
	int i;
	while(1) {
		i = 0;
		i = decoder_parser_parseheaders_scheduler();
		i = decoder_texture_idct2d_scheduler();
		i = decoder_motion_add_scheduler();
		i = decoder_motion_framebuf_scheduler();
	}
}	
